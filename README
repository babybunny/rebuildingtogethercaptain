# ROOMs app for Rebuilding Together Peninsula

# Copyright 2010 Luke Stone

# This is an online ordering system for construction captains for the
# annual Rebuilding Day.

# Set up

# Install appengine_django, I forget the details.

# Install gaeunit for Django
From http://code.google.com/p/gaeunit/, I used gaeunit-2.0a_for_django.zip
See svn revision 13.

Modified gaeunit.py to say
_LOCAL_DJANGO_TEST_DIR = 'test'

and added to urls.py (based on gaeunit/urlsauto.py)
    (r'^test', include('gaeunit.urls')),


# Install tablesorter and south-street date picker from jquery.
Again, I forget the details.

# Install appengine rest server
http://code.google.com/p/appengine-rest-server/wiki/GettingStarted
by copying to /rest
and following instructions in README.txt


# Running unit tests
Start up the dev appserver.  Hit this URL to run all tests:
http://localhost:8081/test
To run just one module from the test/ dir:
http://localhost:8081/test?name=test_order


# Testdata!
# Conventional key ranges:
# 1000-1999 Staff
# 2000-2999 Captain
# <number>  NewSite
# 3000-3999 SiteCaptain

kinds="Staff Captain NewSite SiteCaptain"

# Copying testdata into dev appserver
port=8084
kinds="Captain"
for kind in $kinds; do
  echo "uploading $kind"
  echo | python $(which appcfg.py) upload_data --filename=testdata/$kind.csv --config_file=bulkloader.yaml --url=http://localhost:${port}/_ah/remote_api --kind=$kind --email test@example.com --passin
done


# Making a new testdata set.
# Remove files if you want to over-write.
kinds=$(grep kind: bulkloader.yaml | cut -b8- | xargs)
for kind in $kinds; do
  echo "downloading $kind"
  python $(which appcfg.py) download_data --filename=testdata/$kind.csv --config_file=bulkloader.yaml --url=http://rebuildingtogethercaptain.appspot.com/_ah/remote_api --kind=$kind --email $email --passin < pass
done

# Git workflow
# start on the master branch, nothing pending.
  602  git co -b issue216   # make a new branch
# make some changes
  604  git status
# deploy and test
  613  git commit -a -m "autopep8 -i --indent-size 2 *.py"
  615  git diff
# repeat as desired
  616  git commit -a -m "autopep8 -i --indent-size 2 -r room"
  617  git status
  621  git commit -a -m "autopep8 -i --indent-size 2 -r test"
  622  git status
  623  git commit -a -m "version"
# after all commits on the issue216 branch, merge back into master
  624  git co master
  625  git merge issue216
# send to server
  626  git push
