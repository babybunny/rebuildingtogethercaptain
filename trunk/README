# ROOMs app for Rebuilding Together Peninsula

# Copyright 2010 Luke Stone

# This is an online ordering system for construction captains for the 
# annual Rebuilding Day. 

# Set up

# Install appengine_django, I forget the details. 

# Install gaeunit for Django 
From http://code.google.com/p/gaeunit/, I used gaeunit-2.0a_for_django.zip
See svn revision 13.

Modified gaeunit.py to say
_LOCAL_DJANGO_TEST_DIR = 'test'

and added to urls.py (based on gaeunit/urlsauto.py)
    (r'^test', include('gaeunit.urls')),


# Install tablesorter and south-street date picker from jquery.  
Again, I forget the details.

# Install appengine rest server
http://code.google.com/p/appengine-rest-server/wiki/GettingStarted
by copying to /rest
and following instructions in README.txt


# Running unit tests
Start up the dev appserver.  Hit this URL to run all tests:
http://localhost:8081/test
To run just one module from the test/ dir:
http://localhost:8081/test?name=test_order


# Testdata!
# Conventional key ranges:
# 1000-1999 Staff
# 2000-2999 Captain

# Copying testdata into dev appserver
port=8084
kinds="Captain"
for kind in $kinds; do
  echo "uploading $kind"
  echo | python $(which appcfg.py) upload_data --filename=testdata/$kind.csv --config_file=bulkloader.yaml --url=http://localhost:${port}/_ah/remote_api --kind=$kind --email test@example.com --passin
done


# Making a new testdata set.
# Remove files if you want to over-write.
kinds=$(grep kind: bulkloader.yaml | cut -b8- | xargs)
for kind in $kinds; do
  echo "downloading $kind"
  python $(which appcfg.py) download_data --filename=testdata/$kind.csv --config_file=bulkloader.yaml --url=http://rebuildingtogethercaptain.appspot.com/_ah/remote_api --kind=$kind --email $email --passin < pass
done

